<template>
    <div class="principal">
            <div if:true={isLoading} class="slds-is-relative">
                <lightning-spinner alternative-text="Loading...">
                </lightning-spinner>
            </div>
        <div if:false={isLoading} class="conteudo">
            <div class="title">
                <span>Nova Venda</span><span if:true={headerData.orderNumber}> - {headerData.orderNumber}</span>
                <hr>
            </div>
            <!--COMEÇO NAVBAR-->
            <div class="navbar">
                <a class="previous" onclick={handlePrevious} data-tab="previous">
                    <svg width="11" height="19" viewBox="0 0 11 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9.16031 0.5L0.650024 9.33854L9.16031 18.1771L10.5795 16.7042L3.48645 9.33854L10.5795 1.97292L9.16031 0.5Z"
                            fill="white"></path>
                    </svg>
                    Voltar
                </a>
                <a class="current" data-tab-name="account" data-tab="0">
                    <input type="checkbox" name="" disabled>
                    Seleção da Conta
                </a>
                <a class="" data-tab-name="header" data-tab="1">
                    <input type="checkbox" name="" disabled>
                    Detalhes da Venda
                </a>
                <a if:true={barterSale} class="" data-tab-name="bp" data-tab="2">
                    <input type="checkbox" name="" disabled>
                    Local de Entrega
                </a>
                <a class="" data-tab-name="product" data-tab="3">
                    <input type="checkbox" name="" disabled>
                    Seleção de Produtos
                </a>
                <a class="" data-tab-name="summary" data-tab="4">
                    <input type="checkbox" name="" disabled>
                    Resumo da Venda
                </a>
                <a if:false={hideFooterButtons} class="next" onclick={handleNext} data-tab="next">
                    Avançar
                    <svg width="11" height="19" viewBox="0 0 11 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2.1868 18.1771L10.6971 9.33859L2.18681 0.500045L0.76758 1.97296L7.8607 9.33859L0.767579 16.7042L2.1868 18.1771Z"
                            fill="white"></path>
                    </svg>
                </a>
                <a if:true={hideFooterButtons} class="next" onclick={handleNextCombo} data-tab="next">
                    Avançar
                    <svg width="11" height="19" viewBox="0 0 11 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2.1868 18.1771L10.6971 9.33859L2.18681 0.500045L0.76758 1.97296L7.8607 9.33859L0.767579 16.7042L2.1868 18.1771Z"
                            fill="white"></path>
                    </svg>
                </a>
            </div>
            <!--FINAL NAVBAR-->

            <c-order-account-screen if:true={account} message={message} onsetaccountdata={_setAccountData} selected-account={accountData} clone-data={cloneData} child-order={childOrder}>
            </c-order-account-screen>

            <c-order-header-screen if:true={header} tab="header" onsetheaderdata={_setHeaderData} account-data={accountData} header-data={headerData} header-data-title={headerDataTitle} product-data={productData} division-data={divisionData} clone-data={cloneData} commodity-data={commodityData} excluded-items={excludedItems} forms-of-payment={formsOfPayment} child-order={childOrder} combos-selecteds={combosSelecteds} bp-data={bpData}>
            </c-order-header-screen>

            <c-order-supplier-screen if:true={bp} onsetbpdata={_setBpData} account-data={accountData} header-data={headerData} product-data={productData} division-data={divisionData} clone-data={cloneData} commodity-data={commodityData} excluded-items={excludedItems} forms-of-payment={formsOfPayment} child-order={childOrder} combos-selecteds={combosSelecteds} bp-data={bpData}>
            </c-order-supplier-screen>

            <c-order-product-screen if:true={product} tab="product" onsetproductdata={_setProductData} onsetheadervalues={_setHeaderValues} onsetdivisiondata={_setDivisionData} onsetcommoditydata={_setCommodityData} onsetexcludedesitems={_setExcludedesItems} onsetcombosselecteds={_setcombosSelecteds} onsethidefooterbuttons={_setHideFooterButtons} onsethandleprevious={_setHandlePrevious} onsethandlenext={_setHandleNext} onsettaxdata={_setTaxData} account-data={accountData} header-data={headerData} product-data={productData} division-data={divisionData} clone-data={cloneData} commodity-data={commodityData} excluded-items={excludedItems} forms-of-payment={formsOfPayment} child-order={childOrder} combos-selecteds={combosSelecteds} bp-data={bpData}>
            </c-order-product-screen>

            <c-order-summary-screen if:true={summary} tab="summary" onsetproductdata={_setProductData} onsetsummarydata={_setSummaryData} onsetformsofpayment={_setformsofpayment} product-data={productData} division-data={divisionData} header-data={headerData} account-data={accountData} summary-data={summaryData} clone-data={cloneData} commodity-data={commodityData} excluded-items={excludedItems} forms-of-payment={formsOfPayment} child-order={childOrder} combos-selecteds={combosSelecteds} bp-data={bpData}>
            </c-order-summary-screen>

            <template if:true={changeProductInfos}>
                <div class="modal">
                    <div class="modal-content">
                        <p class="product-title">Quantidade indisponível nos seguintes produtos:</p>

                        <template for:each={quotaProducts} for:item="prod">
                            <div key={prod.id}>
                                <div class="column-33"><b>Produto: </b> {prod.name}</div>
                                <div class="column-33"><b>Quantidade Atual: </b> {prod.currentQuantity}</div>
                                <div class="column-33"><b>Quantidade Disponível: </b> {prod.availableQuantity}</div>
                            </div>
                        </template>

                        <div class="row">
                            <div class="column">
                                <button class="confirm-button" style="float: left;" onclick={excludeProducts}>Excluir Produtos</button>
                            </div>
                            <div class="column">
                                <button class="confirm-button" onclick={changeQuantity}>Alterar Quantidade</button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <!--COMEÇO NAVBAR BOTTOM-->
            <div if:false={hideFooterButtons} class="navbar_bottom" style="padding-top: 20px;">
                <span onclick={handlePrevious}>
                <svg style="margin-right: 15px;" width="11" height="19" viewBox="0 0 11 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#2A9676" d="M9.16031 0.5L0.650024 9.33854L9.16031 18.1771L10.5795 16.7042L3.48645 9.33854L10.5795 1.97292L9.16031 0.5Z"></path>
                </svg>
                Voltar
                </span>
                <template if:false={summary}>
                <span onclick={handleNext}>
                Avançar
                <svg style="margin-left: 15px;" width="11" height="19" viewBox="0 0 11 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#2A9676" d="M2.1868 18.1771L10.6971 9.33859L2.18681 0.500045L0.76758 1.97296L7.8607 9.33859L0.767579 16.7042L2.1868 18.1771Z"></path>
                </svg>
                </span>
                </template>
                <!-- <template if:true={summary}>
                    <button type="button" onclick={saveOrder} class="slds-button slds-button_success">Finalizar</button>
                </template> -->
            </div>
            <!--FINAL NAVBAR BOTTOM-->

            <!--COMEÇO FOOTER-->
            <c-order-screen-footer if:false={account} valor-total={valorTotal} qtd-itens={qtdItens} frete={frete} summary={summary} header-data={headerData} summary-data={summaryData} onsetsummarydata={_setSummaryData} onsaveorder={saveOrder}></c-order-screen-footer>
            <!--FINAL FOOTER-->
        </div>
    </div>
</template>